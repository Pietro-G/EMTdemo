
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Demo_Processing</title><meta name="generator" content="MATLAB 8.4"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-11-19"><meta name="DC.source" content="Demo_Processing.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h2>Contents</h2><div><ul><li><a href="#1">PATH</a></li><li><a href="#2">TOOLBOX</a></li><li><a href="#3">----------------</a></li><li><a href="#4">Load a file - 1 Body</a></li><li><a href="#5">----------------</a></li><li><a href="#6">Plot timeseries</a></li><li><a href="#7">Plot quiver</a></li><li><a href="#8">---------------</a></li><li><a href="#9">Preprocessing</a></li><li><a href="#10">--------------------</a></li><li><a href="#11">Kinetic Energy</a></li><li><a href="#12">Angles</a></li><li><a href="#13">Speed/Acceleration</a></li><li><a href="#14">Sample entropy</a></li><li><a href="#15">Convexhull</a></li><li><a href="#16">Cumulative Distance</a></li><li><a href="#17">Density</a></li><li><a href="#18">Hands Speed</a></li><li><a href="#19">Distance</a></li><li><a href="#20">Sync</a></li><li><a href="#21">--------------------</a></li><li><a href="#22">GRAPHS</a></li><li><a href="#23">CSV FILES</a></li></ul></div><h2>PATH<a name="1"></a></h2><pre class="codeinput">cd <span class="string">/Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/0_DEMO</span> <span class="comment">%ligne rajoutee pour etre sur d'etre bien dans le bon dossier ;  ? adapter en fonction de votre r?pertoire</span>
currentDir = pwd; <span class="comment">%% Access the folder DEMO</span>
cd <span class="string">..</span>; <span class="comment">% Change to the EMC Toolbox directory</span>
toolboxDir = pwd;
</pre><h2>TOOLBOX<a name="2"></a></h2><p>Add path for toolbox</p><pre class="codeinput">addpath(genpath(toolboxDir))
</pre><h2>----------------<a name="3"></a></h2><pre>     LOAD
----------------</pre><h2>Load a file - 1 Body<a name="4"></a></h2><pre class="codeinput">cfg = []; <span class="comment">% Empty cfg</span>
<span class="comment">% Classification</span>
cfg.classificationFlag = true;
cfg.classificationType = <span class="string">'prefix'</span>;
cfg.classInfo = {<span class="string">'Subject'</span>,<span class="string">'Emotion'</span>,<span class="string">'Expressivity'</span>,<span class="string">'Track'</span>};
cfg.classPrefixPosition = {1:2,4:5,7:8,10:11}; <span class="comment">% Give the range where the prefix is positioned within the filename</span>
cfg.classListPrefix = {{<span class="string">'01'</span>,<span class="string">'02'</span>},<span class="keyword">...</span>
                       {<span class="string">'fo'</span>,<span class="string">'jo'</span>,<span class="string">'no'</span>},<span class="keyword">...</span>
                       {<span class="string">'pr'</span>,<span class="string">'dp'</span>},<span class="keyword">...</span>
                       {<span class="string">'01'</span>,<span class="string">'02'</span>}}; <span class="comment">% List of possible prefixes</span>
cfg.classListValue = {{<span class="string">'01'</span>,<span class="string">'02'</span>},<span class="keyword">...</span>
                       {<span class="string">'force'</span>,<span class="string">'joy'</span>,<span class="string">'nostalgia'</span>},<span class="keyword">...</span>
                       {<span class="string">'projected'</span>,<span class="string">'deadpan'</span>},<span class="keyword">...</span>
                       {<span class="string">'01'</span>,<span class="string">'02'</span>}}; <span class="comment">% Categorisation number</span>


tsvFile = emcLoad([toolboxDir, filesep, <span class="string">'1_DATA'</span>, filesep, <span class="string">'Djembe'</span>, filesep, <span class="string">'01_fo_dp_01.tsv'</span>],cfg); <span class="comment">%get the tsv file corresponding to what we need to analyse</span>

<span class="comment">%test</span>
<span class="comment">%tsvFile = emcLoad([toolboxDir, filesep, '1_DATA', filesep, 'Djembe', filesep, '02_jo_pr_01.tsv'],cfg); %get the tsv file corresponding to what we need to analyse</span>


<span class="comment">%specification of the posssible connections between the analysed points</span>
cfg.connectionMatrix = [1,2;1,3;1,4;1,27;1,6;2,3;2,4;2,33;2,6;3,4;3,7;3,27;4,8;4,33;5,7;5,8;5,13;5,20;6,13;6,20;7,12;8,19;9,10;9,11;10,11;12,13;13,14;13,15;14,15;14,17;15,17;16,17;16,18;17,18;19,20;20,21;20,22;21,22;21,24;22,24;23,24;23,25;24,25;26,27;26,29;27,29;28,29;28,30;28,31;30,31;32,33;32,35;33,35;34,35;34,36;34,37;36,37;38,39;39,40;38,40;38,41;38,42;39,41;39,42;40,41;40,42];

<span class="comment">%cfg.connectionMatrix = [1,2];</span>


emcPlotBody(tsvFile, cfg)<span class="comment">%on affiche les points</span>
</pre><pre class="codeoutput">INFO: fillGapFlag set up to TRUE
INFO: Absolute value not stored
INFO: All markers will be kept
[PLOT] 01_fo_dp_01.tsv - frame: 3502
</pre><img vspace="5" hspace="5" src="Demo_Processing_01.png" alt=""> <h2>----------------<a name="5"></a></h2><pre>EXPLORATORY PLOT
----------------</pre><h2>Plot timeseries<a name="6"></a></h2><pre class="codeinput">cfg.plotMarkerList = {<span class="string">'Body:LWristIn'</span>;<span class="string">'Body:RWristIn'</span>};
cfg.displayUnit = <span class="string">'s'</span>;
emcPlotMarker(tsvFile, cfg)
</pre><pre class="codeoutput">[PLOT] 01_fo_dp_01.tsv - Compare Markers
</pre><img vspace="5" hspace="5" src="Demo_Processing_02.png" alt=""> <h2>Plot quiver<a name="7"></a></h2><pre class="codeinput">cfg.plotBodyFlag = true;
emcPlotQuiver(tsvFile, cfg)
</pre><pre class="codeoutput">INFO: Since no cfg.step was set up, arbirarily defined to 20.
[PLOT] 01_fo_dp_01.tsv - step: 20
</pre><img vspace="5" hspace="5" src="Demo_Processing_03.png" alt=""> <h2>---------------<a name="8"></a></h2><pre>PREPROCESSING
---------------</pre><h2>Preprocessing<a name="9"></a></h2><pre class="codeinput">cfg.preprocessingType = {<span class="string">'rotation frontal'</span>};
cfg.markerFrontalList = {<span class="string">'Body:LShoulderTop'</span>;<span class="string">'Body:RShoulderTop'</span>};
cfg.rotationAngleValue = 180;
cfg.rotationAngleAxis = [0 0 1];
tsvFile = emcPreprocessing( tsvFile,cfg);
emcPlotBody(tsvFile, cfg)
</pre><pre class="codeoutput">[PREPROCESSING] rotation frontal
[PLOT] 01_fo_dp_01.tsv - frame: 3529
</pre><img vspace="5" hspace="5" src="Demo_Processing_04.png" alt=""> <h2>--------------------<a name="10"></a></h2><pre>PROCESSING Features
--------------------</pre><h2>Kinetic Energy<a name="11"></a></h2><pre class="codeinput">cfg.display = true;
cfg.displayUnit = <span class="string">'s'</span>;

cfg.m2jpar.type = <span class="string">'m2jpar'</span>;
cfg.m2jpar.nMarkers = 20;
cfg.m2jpar.markerNum = {[1,2,3,4];[1,3];[2,4];[5,6,12,19];[7,8,6,1,2,3,4];[9,10,11];13;[13,14,15];[14,15,17];[16,17,18];20;[20,21,22];[21,22,24];[23,24,25];[27];[26,29,28];[28,30,31];[33];[32,35,34];[34,36,37]};
cfg.m2jpar.markerName = {<span class="string">'BASE'</span>;<span class="string">'LPELVIS'</span>;<span class="string">'RPELVIS'</span>;<span class="string">'THORAX'</span>;<span class="string">'ABDOMEN'</span>;<span class="string">'HEAD'</span>;<span class="string">'LSHOULDER'</span>;<span class="string">'LUARM'</span>;<span class="string">'LFARM'</span>;<span class="string">'LHAND'</span>;<span class="string">'RSHOULDER'</span>;<span class="string">'RUARM'</span>;<span class="string">'RFARM'</span>;<span class="string">'RHAND'</span>;<span class="string">'LTHIGH'</span>;<span class="string">'LLEG'</span>;<span class="string">'LFOOT'</span>;<span class="string">'RTHIGH'</span>;<span class="string">'RLEG'</span>;<span class="string">'RFOOT'</span>};
cfg.j2spar.type = <span class="string">'j2spar'</span>;
cfg.j2spar.rootMarker = 1;
cfg.j2spar.frontalPlane = [5 9 1];
cfg.j2spar.parent = [0,1,1,5,3,4,4,7,8,9,4,11,12,13,3,15,16,3,18,19];
cfg.j2spar.segmentName = cfg.m2jpar.markerName;
cfg.segmidx = [0,14,14,12,13,10,11,3,2,1,11,3,2,1,8,7,6,8,7,6];
cfg.mcspar = mcgetsegmpar(<span class="string">'Dempster'</span>, cfg.segmidx);
cfg.paramComputation = <span class="string">'mean'</span>;
tsvFile = emcKineticEnergy(tsvFile, cfg);
</pre><pre class="codeoutput">cfg.featMarker was not setup. Default: all markers
[PROCESSING] Kinetic Energy
</pre><img vspace="5" hspace="5" src="Demo_Processing_05.png" alt=""> <h2>Angles<a name="12"></a></h2><pre class="codeinput">cfg.transformName = <span class="string">'Body:SHOULDERmid'</span>;
cfg.transformMarker = {<span class="string">'Body:LShoulderTop'</span>, <span class="string">'Body:RShoulderTop'</span>};
[ tsvFile ] = emcMidpoint( tsvFile, cfg);
cfg.transformName = <span class="string">'Body:PELVISbar'</span>;
cfg.transformMarker = {<span class="string">'Body:WaistLFront'</span>;<span class="string">'Body:WaistRFront'</span>;<span class="string">'Body:WaistLBack'</span>;<span class="string">'Body:WaistRBack'</span>};
[ tsvFile ] = emcBaricenter( tsvFile, cfg);
cfg.transformName = <span class="string">'Body:PELVISmid'</span>;
cfg.transformMarker = {<span class="string">'Body:WaistLFront'</span>, <span class="string">'Body:WaistRFront'</span>};
[ tsvFile ] = emcMidpoint( tsvFile, cfg);

cfg.angleDim = 2;
cfg.angleName = <span class="string">'shoulderhead'</span>;
cfg.angleVector = {{<span class="string">'Body:SHOULDERmid'</span>,<span class="string">'Body:Chest'</span>},{<span class="string">'Body:HeadTop'</span>,<span class="string">'Body:HeadFront'</span>}};
tsvFile = emcAngleVector(tsvFile, cfg);
cfg.angleName = <span class="string">'shoulderpelvis'</span>;
cfg.angleVector = {{<span class="string">'Body:SHOULDERmid'</span>,<span class="string">'Body:Chest'</span>},{<span class="string">'Body:PELVISbar'</span>,<span class="string">'Body:PELVISmid'</span>}};
tsvFile = emcAngleVector(tsvFile, cfg);
cfg.angleName = <span class="string">'headpelvis'</span>;
cfg.angleVector = {{<span class="string">'Body:HeadTop'</span>,<span class="string">'Body:HeadFront'</span>},{<span class="string">'Body:PELVISbar'</span>,<span class="string">'Body:PELVISmid'</span>}};
tsvFile = emcAngleVector(tsvFile, cfg);
cfg.lineVector = cfg.angleVector;
emcPlotBody(tsvFile, cfg)

<span class="comment">% Threshold</span>
shoulderheadThreshold = quantile(tsvFile.processing.shoulderhead,0.75);
tsvFile.processing.shoulderheadThreshold = mean(tsvFile.processing.shoulderhead(tsvFile.processing.shoulderhead &gt; shoulderheadThreshold));
shoulderpelvisThreshold = quantile(tsvFile.processing.shoulderpelvis,0.75);
tsvFile.processing.shoulderpelvisThreshold = mean(tsvFile.processing.shoulderpelvis(tsvFile.processing.shoulderpelvis &gt; shoulderpelvisThreshold));
headpelvisThreshold = quantile(tsvFile.processing.headpelvis,0.75);
tsvFile.processing.headpelvisThreshold = mean(tsvFile.processing.headpelvis(tsvFile.processing.headpelvis &gt; headpelvisThreshold));
</pre><pre class="codeoutput">[PLOT] 01_fo_dp_01.tsv - frame: 577
</pre><img vspace="5" hspace="5" src="Demo_Processing_06.png" alt=""> <img vspace="5" hspace="5" src="Demo_Processing_07.png" alt=""> <img vspace="5" hspace="5" src="Demo_Processing_08.png" alt=""> <img vspace="5" hspace="5" src="Demo_Processing_09.png" alt=""> <h2>Speed/Acceleration<a name="13"></a></h2><pre class="codeinput">cfg.euclidianFlag = true;
cfg.derivParam = <span class="string">'norm'</span>;
cfg.deriv = 1;
tsvFile = emcDerivative(tsvFile,cfg);
cfg.deriv = 2;
tsvFile = emcDerivative(tsvFile,cfg);
</pre><pre class="codeoutput">cfg.featMarker was not setup. Default: all markers
[PROCESSING] Derivative
cfg.featMarker was not setup. Default: all markers
[PROCESSING] Derivative
</pre><img vspace="5" hspace="5" src="Demo_Processing_10.png" alt=""> <img vspace="5" hspace="5" src="Demo_Processing_11.png" alt=""> <h2>Sample entropy<a name="14"></a></h2><pre class="codeinput">cfg.featureName = <span class="string">'speed'</span>;
tsvFile = emcSampleEntropy( tsvFile, cfg);
</pre><pre class="codeoutput">[PROCESSING] Sample Entropy
</pre><img vspace="5" hspace="5" src="Demo_Processing_12.png" alt=""> <h2>Convexhull<a name="15"></a></h2><pre class="codeinput">tsvFile = emcConvexhull(tsvFile,cfg);
</pre><pre class="codeoutput">cfg.featMarker was not setup. Default: all markers
[PROCESSING] Convexhull
</pre><img vspace="5" hspace="5" src="Demo_Processing_13.png" alt=""> <img vspace="5" hspace="5" src="Demo_Processing_14.png" alt=""> <h2>Cumulative Distance<a name="16"></a></h2><pre class="codeinput">tsvFile = emcCumulativeDistance( tsvFile, cfg);
</pre><pre class="codeoutput">cfg.featMarker was not setup. Default: all markers
[PROCESSING] Cumulative Distance
</pre><img vspace="5" hspace="5" src="Demo_Processing_15.png" alt=""> <h2>Density<a name="17"></a></h2><pre class="codeinput">tsvFile = emcDensity( tsvFile, cfg);
</pre><pre class="codeoutput">cfg.featMarker was not setup. Default: all markers
[PROCESSING] Density
</pre><img vspace="5" hspace="5" src="Demo_Processing_16.png" alt=""> <h2>Hands Speed<a name="18"></a></h2><pre class="codeinput">cfg.handsMarkers = {<span class="string">'Body:LWristIn'</span>;<span class="string">'Body:RWristIn'</span>};
tsvFile = emcHandsSpeed(tsvFile,cfg);
</pre><pre class="codeoutput">[PROCESSING] Hands Speed
[PROCESSING] Derivative
</pre><img vspace="5" hspace="5" src="Demo_Processing_17.png" alt=""> <h2>Distance<a name="19"></a></h2><pre class="codeinput">cfg.featDistMarker = {<span class="string">'Body:LWristIn'</span>;<span class="string">'Body:RWristIn'</span>};
tsvFile = emcDistance(tsvFile,cfg);
</pre><pre class="codeoutput">[PROCESSING] Distance between markers
</pre><img vspace="5" hspace="5" src="Demo_Processing_18.png" alt=""> <h2>Sync<a name="20"></a></h2><pre class="codeinput">cfg.syncType = <span class="string">'intra'</span>;
cfg.dataType = <span class="string">'marker'</span>;<span class="comment">% 'marker';</span>
cfg.dataList = {<span class="string">'LELB'</span>;<span class="string">'RELB'</span>;<span class="string">'LWRB'</span>;<span class="string">'RWRB'</span>};
tsvFile = emcEventSync( tsvFile, cfg );
</pre><pre class="codeoutput">cfg.colNames was not setup. Default: Numeric
[PROCESSING] Event Sync
</pre><img vspace="5" hspace="5" src="Demo_Processing_19.png" alt=""> <img vspace="5" hspace="5" src="Demo_Processing_20.png" alt=""> <h2>--------------------<a name="21"></a></h2><pre>        SAVE
--------------------</pre><h2>GRAPHS<a name="22"></a></h2><pre class="codeinput">emcSaveGraph([toolboxDir, filesep, <span class="string">'9_Output'</span>])
close <span class="string">all</span>
</pre><pre class="codeoutput">[SAVE] Saving all available graphs into PDFs
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - Delay__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - Sync__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - Distance between markers__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - speed__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - Density__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - Cumulative Distance__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - Convexhull - TF=3549__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - Convexhull__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - speed - Sample Entropy__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - acceleration__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - speed__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv -- TF = 577__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - Angle - headpelvis__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - Angle - shoulderpelvis__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - Angle - shoulderhead__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - Kinetic Energy__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv -- TF = 3529__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv - step: 20__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv -- Compare Markers__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/01_fo_dp_01.tsv -- TF = 3502__19-Nov-2019.fig
Saving../Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/9_Output/Figure__19-Nov-2019.fig
</pre><h2>CSV FILES<a name="23"></a></h2><pre class="codeinput">cfg.outputDir = [toolboxDir, filesep, <span class="string">'9_Output'</span>];
cfg.saveSingleFeatureFlag = true;
cfg.saveSummaryFeatureFlag = true;
cfg.summaryType = {<span class="string">'SUM'</span>,<span class="string">'AVG'</span>,<span class="string">'MEDIAN'</span>,<span class="string">'MODE'</span>,<span class="string">'STD'</span>,<span class="string">'TRIMMEAN'</span>};

<span class="comment">% Save features</span>
cfg.filename = <span class="string">'Summary'</span>;
emcSaveFeature(tsvFile,cfg)
</pre><pre class="codeoutput">[WARNING] No summary plane defined. Default: {}.
[WARNING] concatenateAll set to true. Default: {}.
[WARNING] No saveTrimmeanParam defined. Default: 50.
[SAVE] Saving features for  - 01_fo_dp_01.tsv
Writing kinEnerg
Writing shoulderhead
Writing shoulderpelvis
Writing headpelvis
Writing shoulderheadThreshold
Writing shoulderpelvisThreshold
Writing headpelvisThreshold
Writing speed
Writing acceleration
Writing sampentrop
Writing convexhull
Writing cumuldist
Writing density
Writing distance
Writing sync
Writing delay
Writing Summary SUM
Writing Summary AVG
Writing Summary MEDIAN
Writing Summary MODE
Writing Summary STD
Writing Summary TRIMMEAN
</pre><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2014b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% PATH
cd /Users/florianbuchheit/Documents/PRO/ALIAGE/EMCT-master/0_DEMO %ligne rajoutee pour etre sur d'etre bien dans le bon dossier ;  ? adapter en fonction de votre r?pertoire
currentDir = pwd; %% Access the folder DEMO
cd ..; % Change to the EMC Toolbox directory
toolboxDir = pwd;

%% TOOLBOX
% Add path for toolbox
addpath(genpath(toolboxDir))
%% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%       LOAD
%  REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%% Load a file - 1 Body
cfg = []; % Empty cfg
% Classification
cfg.classificationFlag = true;
cfg.classificationType = 'prefix';  
cfg.classInfo = {'Subject','Emotion','Expressivity','Track'};   
cfg.classPrefixPosition = {1:2,4:5,7:8,10:11}; % Give the range where the prefix is positioned within the filename
cfg.classListPrefix = {{'01','02'},...
                       {'fo','jo','no'},...
                       {'pr','dp'},...
                       {'01','02'}}; % List of possible prefixes
cfg.classListValue = {{'01','02'},...
                       {'force','joy','nostalgia'},...
                       {'projected','deadpan'},...
                       {'01','02'}}; % Categorisation number
                   
                   
tsvFile = emcLoad([toolboxDir, filesep, '1_DATA', filesep, 'Djembe', filesep, '01_fo_dp_01.tsv'],cfg); %get the tsv file corresponding to what we need to analyse

%test
%tsvFile = emcLoad([toolboxDir, filesep, '1_DATA', filesep, 'Djembe', filesep, '02_jo_pr_01.tsv'],cfg); %get the tsv file corresponding to what we need to analyse


%specification of the posssible connections between the analysed points 
cfg.connectionMatrix = [1,2;1,3;1,4;1,27;1,6;2,3;2,4;2,33;2,6;3,4;3,7;3,27;4,8;4,33;5,7;5,8;5,13;5,20;6,13;6,20;7,12;8,19;9,10;9,11;10,11;12,13;13,14;13,15;14,15;14,17;15,17;16,17;16,18;17,18;19,20;20,21;20,22;21,22;21,24;22,24;23,24;23,25;24,25;26,27;26,29;27,29;28,29;28,30;28,31;30,31;32,33;32,35;33,35;34,35;34,36;34,37;36,37;38,39;39,40;38,40;38,41;38,42;39,41;39,42;40,41;40,42];

%cfg.connectionMatrix = [1,2];


emcPlotBody(tsvFile, cfg)%on affiche les points 

%% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%  EXPLORATORY PLOT
%  REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%% Plot timeseries
cfg.plotMarkerList = {'Body:LWristIn';'Body:RWristIn'};
cfg.displayUnit = 's';
emcPlotMarker(tsvFile, cfg)

%% Plot quiver
cfg.plotBodyFlag = true;
emcPlotQuiver(tsvFile, cfg)

%% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
%  PREPROCESSING
%  REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
%% Preprocessing
cfg.preprocessingType = {'rotation frontal'};
cfg.markerFrontalList = {'Body:LShoulderTop';'Body:RShoulderTop'};
cfg.rotationAngleValue = 180;
cfg.rotationAngleAxis = [0 0 1];
tsvFile = emcPreprocessing( tsvFile,cfg);
emcPlotBody(tsvFile, cfg)

%% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%  PROCESSING Features
%  REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%% Kinetic Energy
cfg.display = true;
cfg.displayUnit = 's';

cfg.m2jpar.type = 'm2jpar';
cfg.m2jpar.nMarkers = 20;
cfg.m2jpar.markerNum = {[1,2,3,4];[1,3];[2,4];[5,6,12,19];[7,8,6,1,2,3,4];[9,10,11];13;[13,14,15];[14,15,17];[16,17,18];20;[20,21,22];[21,22,24];[23,24,25];[27];[26,29,28];[28,30,31];[33];[32,35,34];[34,36,37]};
cfg.m2jpar.markerName = {'BASE';'LPELVIS';'RPELVIS';'THORAX';'ABDOMEN';'HEAD';'LSHOULDER';'LUARM';'LFARM';'LHAND';'RSHOULDER';'RUARM';'RFARM';'RHAND';'LTHIGH';'LLEG';'LFOOT';'RTHIGH';'RLEG';'RFOOT'};
cfg.j2spar.type = 'j2spar';
cfg.j2spar.rootMarker = 1;
cfg.j2spar.frontalPlane = [5 9 1];
cfg.j2spar.parent = [0,1,1,5,3,4,4,7,8,9,4,11,12,13,3,15,16,3,18,19];
cfg.j2spar.segmentName = cfg.m2jpar.markerName;
cfg.segmidx = [0,14,14,12,13,10,11,3,2,1,11,3,2,1,8,7,6,8,7,6];
cfg.mcspar = mcgetsegmpar('Dempster', cfg.segmidx);
cfg.paramComputation = 'mean';
tsvFile = emcKineticEnergy(tsvFile, cfg);

%% Angles
cfg.transformName = 'Body:SHOULDERmid';
cfg.transformMarker = {'Body:LShoulderTop', 'Body:RShoulderTop'};
[ tsvFile ] = emcMidpoint( tsvFile, cfg);
cfg.transformName = 'Body:PELVISbar';
cfg.transformMarker = {'Body:WaistLFront';'Body:WaistRFront';'Body:WaistLBack';'Body:WaistRBack'};
[ tsvFile ] = emcBaricenter( tsvFile, cfg);
cfg.transformName = 'Body:PELVISmid';
cfg.transformMarker = {'Body:WaistLFront', 'Body:WaistRFront'};
[ tsvFile ] = emcMidpoint( tsvFile, cfg);

cfg.angleDim = 2;
cfg.angleName = 'shoulderhead';
cfg.angleVector = {{'Body:SHOULDERmid','Body:Chest'},{'Body:HeadTop','Body:HeadFront'}};
tsvFile = emcAngleVector(tsvFile, cfg);
cfg.angleName = 'shoulderpelvis';
cfg.angleVector = {{'Body:SHOULDERmid','Body:Chest'},{'Body:PELVISbar','Body:PELVISmid'}};
tsvFile = emcAngleVector(tsvFile, cfg);
cfg.angleName = 'headpelvis';
cfg.angleVector = {{'Body:HeadTop','Body:HeadFront'},{'Body:PELVISbar','Body:PELVISmid'}};
tsvFile = emcAngleVector(tsvFile, cfg);
cfg.lineVector = cfg.angleVector;
emcPlotBody(tsvFile, cfg)

% Threshold
shoulderheadThreshold = quantile(tsvFile.processing.shoulderhead,0.75);
tsvFile.processing.shoulderheadThreshold = mean(tsvFile.processing.shoulderhead(tsvFile.processing.shoulderhead > shoulderheadThreshold));
shoulderpelvisThreshold = quantile(tsvFile.processing.shoulderpelvis,0.75);
tsvFile.processing.shoulderpelvisThreshold = mean(tsvFile.processing.shoulderpelvis(tsvFile.processing.shoulderpelvis > shoulderpelvisThreshold));
headpelvisThreshold = quantile(tsvFile.processing.headpelvis,0.75);
tsvFile.processing.headpelvisThreshold = mean(tsvFile.processing.headpelvis(tsvFile.processing.headpelvis > headpelvisThreshold));

%% Speed/Acceleration
cfg.euclidianFlag = true;
cfg.derivParam = 'norm';
cfg.deriv = 1;
tsvFile = emcDerivative(tsvFile,cfg);
cfg.deriv = 2;
tsvFile = emcDerivative(tsvFile,cfg);

%% Sample entropy
cfg.featureName = 'speed';
tsvFile = emcSampleEntropy( tsvFile, cfg);

%% Convexhull
tsvFile = emcConvexhull(tsvFile,cfg);

%% Cumulative Distance
tsvFile = emcCumulativeDistance( tsvFile, cfg);

%% Density
tsvFile = emcDensity( tsvFile, cfg);

%% Hands Speed
cfg.handsMarkers = {'Body:LWristIn';'Body:RWristIn'};
tsvFile = emcHandsSpeed(tsvFile,cfg);

%% Distance
cfg.featDistMarker = {'Body:LWristIn';'Body:RWristIn'};
tsvFile = emcDistance(tsvFile,cfg);

%% Sync
cfg.syncType = 'intra';
cfg.dataType = 'marker';% 'marker';
cfg.dataList = {'LELB';'RELB';'LWRB';'RWRB'}; 
tsvFile = emcEventSync( tsvFile, cfg );

%% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%          SAVE
%  REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%% GRAPHS
emcSaveGraph([toolboxDir, filesep, '9_Output'])
close all
%% CSV FILES
cfg.outputDir = [toolboxDir, filesep, '9_Output'];
cfg.saveSingleFeatureFlag = true;
cfg.saveSummaryFeatureFlag = true;
cfg.summaryType = {'SUM','AVG','MEDIAN','MODE','STD','TRIMMEAN'};

% Save features
cfg.filename = 'Summary';
emcSaveFeature(tsvFile,cfg)

##### SOURCE END #####
--></body></html>